# Loathsxome plugin: pagetitle
# Abhijit Menon-Sen <ams@toroid.org>
#
# Defines $pagetitle and $heading
#
# $pagetitle is either "name" (for index views), or "name: title" (for
# individual posts). $heading is always "name", for use in H1.

package loathsxome::pagetitle;

sub start {
    1;
}

sub head {
    my ($pkg, $post, $head) = @_;

    $loathsxome::heading = $loathsxome::name;
    $loathsxome::pagetitle = $loathsxome::name;
    if ($post) {
        my $title = $loathsxome::entries{$post}{title};
        $loathsxome::pagetitle .= ": " . $title;
    }
}

1;
